@using gogobuy.ViewModels;
@model IEnumerable<gogobuy.tProduct>

@{
    ViewBag.Title = "Chat";
}

@section scripts {

    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <!-- SignalR Lib -->

    <script src="~/Scripts/jquery.signalR-2.2.2.js"></script>

    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <!-- Chat Room Javascript (SignalR)-->
    <script src="~/Scripts/mpw-chat.js"></script>
    @*<script src="~/Scripts/gogobuy-chat.js"></script>*@
    <script src="~/Scripts/SignalR.Update.js"></script>


}

<script src="~/Scripts/jquery-3.6.0.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>






<script>

    function wishdelete(productID) {
        $('#' + productID).remove();
        console.log("測試有沒有");
    }

    //$('button').click(function (event) {
    //    productID = event.target.id
    //    $('#tr' + productID).remove();
    //    console.log("測試有沒有");
    //});
</script>





<style type="text/css">
    #txaChat {
        height: 237px;
        width: 860px;
    }

    #txaUsers {
        height: 237px;
        width: 110px;
    }

    #txbMessage {
        width: 600px;
    }
</style>

<br />

<h2 style="margin-left:210px">願望商品</h2>

@*<h4>(開啟兩個chatroom測試聊天)</h4>*@



<div class="col-md-8 bg-white" style="margin:0px auto">
    <div class="chat-box bg-white">

        @*聊天室姓名:&nbsp;*@

        <div class="input-group">
            <input class="form-control border no-shadow no-rounded" placeholder="請登入帳號" id="txbUserName" type="text" hidden value="@ViewBag.UserName">
            @*<span><h3>聊天室</h3></span>*@
            <span class="input-group-btn">
                <button class="btn btn-success no-rounded" id="btnJoin" type="button" value="Send" style="margin-left:5px; margin-top:2px">開始協議</button>
            </span>
        </div>

        <br />

        <textarea id="txaChat" rows="1" readonly="readonly" class="border no-shadow no-rounded"></textarea>
        @*<textarea id="txaUsers" name="S2" readonly="readonly" rows="2" class="border no-shadow no-rounded"></textarea>*@


    </div>

    <br />

    <div class="chat-box bg-white">
        <div class="input-group">
            <input class="form-control border no-shadow no-rounded" placeholder="請輸入訊息" id="txbMessage" type="text">
            <span class="input-group-btn">
                <button class="btn btn-success no-rounded" id="btnSend" type="button" value="Send" style="margin-left:5px; margin-top:2px">送出</button>
            </span>
        </div>
    </div>


    <br />



    @*@{
            <table class="border no-shadow no-rounded" style="padding:10px">
                <thead>
                    <tr>
                        <th>圖片</th>
                        <th>品名</th>
                        <th>售價</th>
                        <th>數量</th>
                        <th>備註</th>
                        <th>刪除</th>
                    </tr>
                </thead>

                @foreach (var item in Model)
                {

                    <tbody>
                            <tr id="@item.fProductID">
                                <td hidden><input type="text" name="MemberID" value="@item.fMemberID" hidden /></td>
                                <td><img src="~/Content/img/Product/@item.fImgPath" style="height:50px;width:50px;"></td>
                                <td>@item.fProductName</td>
                                <td><input type="text" name="ProductPrice" value="$@String.Format("{0:0}", item.fPrice)" /></td>
                                <td><input type="text" name="ProductQuantity" value="" placeholder="輸入購買數量"/></td>
                                <td><input type="text" name="ProductNote" value="" placeholder="EX:寄送事宜"/></td>
                                <td><button onclick="wishdelete(@item.fProductID)" class="btn jq-delete"><img src="https://image.flaticon.com/icons/png/512/3096/3096673.png" style="height:20px;width:20px"></button></td>
                            </tr>
                        </tbody>

                }
            </table>
        }*@







    @{<form method="post" action="~/Chatroom/AddWishOrder">
            <table class="border no-shadow no-rounded" style="padding:10px">
                <thead>
                    <tr>
                        <th>圖片</th>
                        <th>品名</th>
                        <th>售價</th>
                        <th>數量</th>
                        <th>備註</th>
                        <th>刪除</th>
                    </tr>
                </thead>

                @{
                    int count = 1; 
                 }
                

                @foreach (var item in Model)

                {

                    

                    <tbody>
                        <tr id="@item.fProductID">
                            <td hidden><input type="text" name="ProductID@(count)" value="@item.fProductID" hidden /></td>
                            <td hidden><input type="text" name="MemberID@(count)" value="@item.fMemberID" hidden /></td>
                            <td><img src="~/Content/img/Product/@item.fImgPath" style="height:50px;width:50px;"></td>
                            <td>@item.fProductName</td>
                            <td><input type="text" name="ProductPrice@(count)" value="@item.fPrice" placeholder="$@String.Format("{0:0}", item.fPrice)" /></td>
                            <td><input type="text" name="ProductQuantity@(count)" value="3" placeholder="輸入購買數量" /></td>
                            <td><input type="text" name="ProductNote@(count)" value="n/a" placeholder="EX:寄送事宜" /></td>
                            <td><button onclick="wishdelete(@item.fProductID)" class="btn jq-delete"><img src="https://image.flaticon.com/icons/png/512/3096/3096673.png" style="height:20px;width:20px"></button></td>
                        </tr>
                    </tbody>
                    count++;
                }

                
            </table>
                <input type="text" name="Count" value="@(count)" hidden />

            <span class="input-group-btn">

                <button class="btn btn-success no-rounded" id="" type="submit" value="submit" style="margin-left:5px; margin-top:20px" onClick="window.alert('已成功提交訂單!')" ;>確認訂單</button>

            </span>

       </form>




    }






</div>

